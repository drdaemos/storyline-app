- When adding new functionality or changing the existing one, make sure to cover it with some basic tests and run to validate the test execution
- Always add correct python types if they cannot be inferred (run `ruff` to validate them)
- Avoid using Any type if possible
- Do not add dependencies directly editing the pyproject.toml, use `uv add <dependencies>` command
- When writing tests for the files that contain LLM prompts, avoid checking for specific text of the prompt, it gets rephrased often.
- Always mock prompt processors / LLM SDKs to avoid actual outbound LLM calls
- Never `import` inside the logic, always put it on top of the file among other imports.
- When writing tests, avoid testing for encapsulated, private behaviour: focus on what can be observed in the output due to different inputs.
- If a test requires some side-effect to be exposed - raise that with the user and ask how they want to do this.
- Avoid putting extra logic into the interfacing classes (e.g API / CLI handler) - separate it from handling the comms by putting dataclasses / models into /src/models and creating separate logic classes in /src
- In general, avoid having one thing doing too much - aggressively separate logic into smaller pieces that can be tested and reused.